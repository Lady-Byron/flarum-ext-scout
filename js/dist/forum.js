(()=>{var t={n:i=>{var e=i&&i.__esModule?()=>i.default:()=>i;return t.d(e,{a:e}),e},d:(i,e)=>{for(var r in e)t.o(e,r)&&!t.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:e[r]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};(()=>{"use strict";const i=flarum.core.compat["forum/app"];var e=t.n(i);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/DiscussionsSearchSource"];var o=t.n(n);const s=flarum.core.compat["forum/components/DiscussionListItem"];var l=t.n(s);const a=flarum.core.compat["common/components/Link"];var c=t.n(a);const u=flarum.core.compat["common/helpers/highlight"];var d=t.n(u);e().initializers.add("lady-byron-scout",function(){(0,r.extend)(o().prototype,"view",function(t,i){if(Array.isArray(t)){var r=this.results.get(i.toLowerCase())||[];r.length&&t.forEach(function(t){var n,o=null==t||null==(n=t.attrs)?void 0:n["data-index"];if(o&&"string"==typeof o&&o.startsWith("discussions")){var s=o.replace("discussions",""),l=r.find(function(t){return String(t.id())===s});if(l){var a=l.attribute("titleHighlight"),u=l.attribute("contentHighlight"),f=null==l.mostRelevantPost?void 0:l.mostRelevantPost(),h=a?m.trust(a):d()(l.title()||"",i),v=null;if(u)v=m.trust(u);else if(f){var p=null==f.contentPlain?void 0:f.contentPlain();p&&(v=d()(p,i,100))}var g=null==f||null==f.number?void 0:f.number(),y=e().route.discussion(l,g);t.children=[m(c(),{href:y},[m("div",{className:"DiscussionSearchResult-title"},h),v?m("div",{className:"DiscussionSearchResult-excerpt"},v):null].filter(Boolean))]}}})}}),(0,r.extend)(l().prototype,"view",function(t){var i=this.attrs.discussion;if(i){var e=i.attribute("titleHighlight"),r=i.attribute("contentHighlight");if(console.log("DiscussionListItem",{id:i.id(),titleHighlight:!!e,contentHighlight:!!r,contentHighlightValue:r}),e||r){var n=function(t){var i,o;if(t&&"object"==typeof t){var s=(null==(i=t.attrs)?void 0:i.className)||(null==(o=t.attrs)?void 0:o.class)||"";if("string"==typeof s){if(s.includes("DiscussionListItem-title")&&e)return void(t.children=[m.trust(e)]);if(s.includes("item-excerpt")&&r)return void(t.children=[m.trust(r)])}Array.isArray(t.children)?t.children.forEach(n):t.children&&n(t.children)}};n(t)}}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map