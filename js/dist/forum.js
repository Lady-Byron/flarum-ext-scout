(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var r=t.n(e);const i=flarum.core.compat["common/extend"],s=flarum.core.compat["forum/components/DiscussionsSearchItem"];var n=t.n(s);const o=flarum.core.compat["forum/components/DiscussionListItem"];var a=t.n(o);const c=flarum.core.compat["common/utils/ItemList"];var u=t.n(c);function l(t,e,r){if(!e&&!r)return t;var i=t,s=0,n=new RegExp(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(null!=e?e:""),"gi");if(r){if(e){var o=t.search(n);s=Math.max(0,-1===o?0:o-Math.floor(r/2))}i=t.substring(s,s+r),s>0&&(i="..."+i),s+r<t.length&&(i+="...")}return i=$("<div/>").text(i).html(),e&&(i=i.replace(n,"<mark>$&</mark>")),m.trust(i)}r().initializers.add("lady-byron-scout",function(){(0,i.override)(n().prototype,"viewItems",function(t){var e=new(u()),r=this.discussion.attribute("titleHighlight"),i=this.discussion.attribute("contentHighlight"),s=r?m.trust(r):l(this.discussionTitle(),this.query);if(e.add("discussion-title",m("div",{className:"DiscussionSearchResult-title"},s),90),this.mostRelevantPost){var n,o=i?m.trust(i):l(null!=(n=this.mostRelevantPostContent())?n:"",this.query,100);e.add("most-relevant",m("div",{className:"DiscussionSearchResult-excerpt"},o),80)}return e}),(0,i.extend)(a().prototype,"view",function(t){var e=this.attrs.discussion;if(e){var r=e.attribute("titleHighlight"),i=e.attribute("contentHighlight");if(r||i){var s=function(t){var e,n;if(t&&"object"==typeof t){var o=(null==(e=t.attrs)?void 0:e.className)||(null==(n=t.attrs)?void 0:n.class)||"";if("string"==typeof o){if(o.includes("DiscussionListItem-title")&&r)return void(t.children=[m.trust(r)]);if(o.includes("item-excerpt")&&i)return void(t.children=[m.trust(i)])}Array.isArray(t.children)?t.children.forEach(s):t.children&&s(t.children)}};s(t)}}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map